<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="/api">
    </form>
    <select name="" id="cat">
        <option value=""></option>
    </select>
    <select name="catItems" id="" onchange="loadSubCategories()"></select>
<script>
    const categories_id = document.querySelector('#cat');
    const subcategory_id = document.querySelector('#catItems')
    fetch("{{url_for('api.api_categories')}}")
    .then(response=>response.text())
    .then(data=>{
        const categories = JSON.parse(data)
        categories.forEach(category=>{
            category_id.innerHTML+=`<option value = "${category.id}">${category.name}</option>`;
        });
    })
    function loadSubCategories(){
        fetch("{{url_for('api.api_subcategories')}}")
        .then(response=>response.text())
        .then(data=>{
            const subcategories = JSON.parse(data);
            subcategories.forEach(subcategory=>{
                if(subcategory.category_id=category_id.value){
                    subcategory_id.innerHTML = `<option value = "${subcategory.id}">${subcategory.name}</option>`;
                }
            })
        })
    }
</script>
</body>
</html>
